{"ast":null,"code":"import { FormControl } from '@angular/forms';\nimport { Observable } from 'rxjs';\nimport { map, startWith } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/curso.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/material/form-field\";\nimport * as i5 from \"@angular/material/input\";\nimport * as i6 from \"@angular/material/autocomplete\";\nimport * as i7 from \"@angular/material/core\";\nimport * as i8 from \"../curso-details/curso-details.component\";\n\nfunction CursoListComponent_mat_option_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const option_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r3.nombre);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", option_r3.nombre, \" \");\n  }\n}\n\nfunction CursoListComponent_li_17_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const curso_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" (\", curso_r4.tema.nombre, \") \");\n  }\n}\n\nfunction CursoListComponent_li_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 16);\n    i0.ɵɵlistener(\"click\", function CursoListComponent_li_17_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const curso_r4 = restoredCtx.$implicit;\n      const i_r5 = restoredCtx.index;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.setActiveElement(curso_r4, i_r5));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵtemplate(2, CursoListComponent_li_17_div_2_Template, 2, 1, \"div\", 17);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const curso_r4 = ctx.$implicit;\n    const i_r5 = ctx.index;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"active\", i_r5 == ctx_r2.currentIndex);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", curso_r4.nombre, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", curso_r4.tema);\n  }\n}\n\nexport class CursoListComponent {\n  constructor(cursoService) {\n    this.cursoService = cursoService;\n    this.currentElement = {};\n    this.currentIndex = -1;\n    this.title = '';\n    this.myControl = new FormControl();\n    this.options = [];\n    this.displayedCursos = []; // Variable para mostrar resultados\n\n    this.filteredOptions = new Observable();\n  }\n\n  ngOnInit() {\n    this.retrieveCursos();\n    this.filteredOptions = this.myControl.valueChanges.pipe(startWith(''), map(val => this._filter(val)));\n  }\n\n  retrieveCursos() {\n    this.cursoService.getAll().subscribe({\n      next: data => {\n        this.cursos = data;\n        this.options = this.cursos;\n        this.displayedCursos = this.cursos; // Inicialmente, mostrar todos los cursos\n\n        console.log(this.cursos);\n      },\n      error: e => console.error(e)\n    });\n  }\n\n  refreshList() {\n    this.retrieveCursos();\n    this.currentElement = {};\n    this.currentIndex = -1;\n  }\n\n  setActiveElement(element, index) {\n    this.currentElement = element;\n    this.currentIndex = index;\n  }\n\n  removeAllElements() {\n    this.cursoService.deleteAll().subscribe({\n      next: res => {\n        console.log(res);\n        this.refreshList();\n      },\n      error: e => console.error(e)\n    });\n  }\n\n  searchTitle() {\n    this.currentElement = {};\n    this.currentIndex = -1;\n\n    if (this.title && this.cursos) {\n      // Realizar la búsqueda solo si se ha ingresado un título y se han cargado los cursos\n      this.displayedCursos = this.cursos.filter(curso => curso.nombre?.toLowerCase().includes(this.title.toLowerCase()));\n    } else {\n      // Si no se ingresa un título o no se han cargado los cursos, mostrar todos los cursos\n      this.displayedCursos = this.cursos || [];\n    }\n  }\n\n  _filter(value) {\n    const filterValue = value.toLowerCase();\n    return this.options.filter(option => option.nombre && option.nombre.toLowerCase().includes(filterValue));\n  }\n\n}\n\nCursoListComponent.ɵfac = function CursoListComponent_Factory(t) {\n  return new (t || CursoListComponent)(i0.ɵɵdirectiveInject(i1.CursoService));\n};\n\nCursoListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CursoListComponent,\n  selectors: [[\"app-curso-list\"]],\n  decls: 20,\n  vars: 8,\n  consts: [[1, \"list\", \"row\"], [1, \"col-md-8\"], [1, \"input-group\", \"mb-3\"], [1, \"example-form\"], [1, \"example-full-width\"], [\"type\", \"text\", \"placeholder\", \"Buscar curso\", \"matInput\", \"\", 3, \"formControl\", \"matAutocomplete\"], [\"autoActiveFirstOption\", \"\"], [\"auto\", \"matAutocomplete\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"input-group-append\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-secondary\", 3, \"click\"], [1, \"col-md-6\"], [1, \"list-group\"], [\"class\", \"list-group-item\", 3, \"active\", \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"viewMode\", \"currentElement\"], [3, \"value\"], [1, \"list-group-item\", 3, \"click\"], [4, \"ngIf\"]],\n  template: function CursoListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"form\", 3)(4, \"mat-form-field\", 4);\n      i0.ɵɵelement(5, \"input\", 5);\n      i0.ɵɵelementStart(6, \"mat-autocomplete\", 6, 7);\n      i0.ɵɵtemplate(8, CursoListComponent_mat_option_8_Template, 2, 2, \"mat-option\", 8);\n      i0.ɵɵpipe(9, \"async\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(10, \"div\", 9)(11, \"button\", 10);\n      i0.ɵɵlistener(\"click\", function CursoListComponent_Template_button_click_11_listener() {\n        return ctx.searchTitle();\n      });\n      i0.ɵɵtext(12, \" Buscar \");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(13, \"div\", 11)(14, \"h4\");\n      i0.ɵɵtext(15, \"Listado Cursos\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"ul\", 12);\n      i0.ɵɵtemplate(17, CursoListComponent_li_17_Template, 3, 4, \"li\", 13);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(18, \"div\", 11);\n      i0.ɵɵelement(19, \"app-curso-details\", 14);\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(7);\n\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"formControl\", ctx.myControl)(\"matAutocomplete\", _r0);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(9, 6, ctx.filteredOptions));\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngForOf\", ctx.cursos);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"viewMode\", true)(\"currentElement\", ctx.currentElement);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.NgForm, i4.MatFormField, i5.MatInput, i6.MatAutocomplete, i6.MatAutocompleteTrigger, i7.MatOption, i3.FormControlDirective, i8.CursoDetailsComponent, i2.AsyncPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjdXJzby1saXN0LmNvbXBvbmVudC5jc3MifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","Observable","map","startWith","i0","CursoListComponent","constructor","cursoService","ngOnInit","retrieveCursos","filteredOptions","myControl","valueChanges","pipe","val","_filter","getAll","subscribe","next","data","cursos","options","displayedCursos","console","log","error","e","refreshList","currentElement","currentIndex","setActiveElement","element","index","removeAllElements","deleteAll","res","searchTitle","title","filter","curso","nombre","toLowerCase","includes","value","filterValue","option","selectors","decls","vars","consts","template","ctx","_r0"],"sourceRoot":"","sources":["C:\\Users\\tomii\\git\\ngDDS2023\\src\\app\\components\\curso-list\\curso-list.component.ts","C:\\Users\\tomii\\git\\ngDDS2023\\src\\app\\components\\curso-list\\curso-list.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Curso } from 'src/app/models/curso.model';\nimport { CursoService } from 'src/app/services/curso.service';\nimport { FormControl } from '@angular/forms';\nimport { Observable } from 'rxjs';\nimport { map, startWith } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-curso-list',\n  templateUrl: './curso-list.component.html',\n  styleUrls: ['./curso-list.component.css'],\n})\nexport class CursoListComponent implements OnInit {\n  cursos?: Curso[];\n  currentElement: Curso = {};\n  currentIndex = -1;\n  title = '';\n\n  myControl = new FormControl();\n  options: Curso[] = [];\n  displayedCursos: Curso[] = []; // Variable para mostrar resultados\n\n  filteredOptions: Observable<Curso[]> = new Observable<Curso[]>();\n\n  constructor(private cursoService: CursoService) {}\n\n  ngOnInit(): void {\n    this.retrieveCursos();\n    this.filteredOptions = this.myControl.valueChanges.pipe(\n      startWith(''),\n      map((val) => this._filter(val))\n    );\n  }\n\n  retrieveCursos(): void {\n    this.cursoService.getAll().subscribe({\n      next: (data) => {\n        this.cursos = data;\n        this.options = this.cursos;\n        this.displayedCursos = this.cursos; // Inicialmente, mostrar todos los cursos\n        console.log(this.cursos);\n      },\n      error: (e) => console.error(e),\n    });\n  }\n\n  refreshList(): void {\n    this.retrieveCursos();\n    this.currentElement = {};\n    this.currentIndex = -1;\n  }\n\n  setActiveElement(element: Curso, index: number): void {\n    this.currentElement = element;\n    this.currentIndex = index;\n  }\n\n  removeAllElements(): void {\n    this.cursoService.deleteAll().subscribe({\n      next: (res) => {\n        console.log(res);\n        this.refreshList();\n      },\n      error: (e) => console.error(e),\n    });\n  }\n\nsearchTitle(): void {\n  this.currentElement = <Curso>{};\n  this.currentIndex = -1;\n\n  if (this.title && this.cursos) {\n    // Realizar la búsqueda solo si se ha ingresado un título y se han cargado los cursos\n    this.displayedCursos = this.cursos.filter((curso) =>\n      curso.nombre?.toLowerCase().includes(this.title.toLowerCase())\n    );\n  } else {\n    // Si no se ingresa un título o no se han cargado los cursos, mostrar todos los cursos\n    this.displayedCursos = this.cursos || [];\n  }\n}\n\n\n  private _filter(value: string): Curso[] {\n    const filterValue = value.toLowerCase();\n    return this.options.filter((option) =>\n      option.nombre && option.nombre.toLowerCase().includes(filterValue)\n    );\n  }\n}\n\n","<div class=\"list row\">\n  <div class=\"col-md-8\">\n    <div class=\"input-group mb-3\">\n      <form class=\"example-form\">\n\t\t  <mat-form-field class=\"example-full-width\">\n\t\t  <!--  <mat-label> Cursos </mat-label> -->\n\t\t    <input type=\"text\"\n\t\t           placeholder=\"Buscar curso\"\n\t\t           matInput\n\t\t           [formControl]=\"myControl\"\n\t\t           [matAutocomplete]=\"auto\">\n\t\t    <mat-autocomplete autoActiveFirstOption #auto=\"matAutocomplete\">\n\t\t      <mat-option *ngFor=\"let option of filteredOptions | async\" [value]=\"option.nombre\">\n\t\t        {{option.nombre}}\n\t\t      </mat-option>\n\t\t    </mat-autocomplete>\n\t\t  </mat-form-field>\n\t\t</form>\n      <div class=\"input-group-append\">\n        <button\n          class=\"btn btn-outline-secondary\"\n          type=\"button\"\n          (click)=\"searchTitle()\"\n        >\n          Buscar\n        </button>\n      </div>\n    </div>\n  </div>\n  <div class=\"col-md-6\">\n    <h4>Listado Cursos</h4>\n    <ul class=\"list-group\">\n      <li\n        class=\"list-group-item\"\n        *ngFor=\"let curso of cursos; let i = index\"\n        [class.active]=\"i == currentIndex\"\n        (click)=\"setActiveElement(curso, i)\"\n      >\n        {{ curso.nombre }} \n        <div *ngIf=\"curso.tema\">\n        \t({{ curso.tema.nombre }})\n        </div> \n      </li>\n    </ul>\n  </div>\n<div class=\"col-md-6\">\n  <app-curso-details\n  [viewMode]=\"true\"\n  [currentElement]=\"currentElement\"\n></app-curso-details>\n</div>\n</div>\n"]},"metadata":{},"sourceType":"module"}